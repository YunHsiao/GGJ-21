System.register("chunks:///_virtual/CameraClamping.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,r,n,o,l,a,s,u,c,h,f,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.defineProperty},function(e){l=e.cclegacy,a=e._decorator,s=e.Vec3,u=e.Collider,c=e.Node,h=e.director,f=e.Director,d=e.Component}],execute:function(){var v,g,p,m,b,w,y,z,C,_,E,L;l._RF.push({},"01573nDNMVMVb35s7Vja1ru","CameraClamping",void 0);var F=a.ccclass,O=a.property,T=new s;e("CameraClamping",(v=F("CameraClamping"),g=O(u),p=O(u),m=O(c),v((y=i((w=function(e){function i(){for(var i,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,r(n(i),"minY",y,n(i)),r(n(i),"increment",z,n(i)),r(n(i),"curLevel",C,n(i)),r(n(i),"gameOverCollider",_,n(i)),r(n(i),"levelFinishedCollider",E,n(i)),r(n(i),"target",L,n(i)),o(n(i),"_offset",new s),i}t(i,e);var l=i.prototype;return l.start=function(){s.subtract(this._offset,this.node.worldPosition,this.target.worldPosition)},l.onEnable=function(){var e,i;h.on(f.EVENT_BEFORE_DRAW,this.followTarget,this),null===(e=this.gameOverCollider)||void 0===e||e.on("onTriggerEnter",this.onGameOver,this),null===(i=this.levelFinishedCollider)||void 0===i||i.on("onTriggerEnter",this.onLevelFinished,this)},l.onDisable=function(){var e,i;h.off(f.EVENT_BEFORE_DRAW,this.followTarget,this),null===(e=this.gameOverCollider)||void 0===e||e.off("onTriggerEnter",this.onGameOver,this),null===(i=this.levelFinishedCollider)||void 0===i||i.off("onTriggerEnter",this.onLevelFinished,this)},l.followTarget=function(){var e=this.target.worldPosition;this.node.getWorldPosition(T),Math.abs(e.z-T.z)>13&&this.onGameOver(),T.z-e.z>this._offset.z&&(T.z=e.z+this._offset.z),T.z-=this.increment,T.set(e.x,e.y,T.z).add3f(this._offset.x,this._offset.y,0),T.y=Math.max(T.y,this.minY),this.node.worldPosition=T},l.onGameOver=function(){this.switchLevel(this.curLevel)},l.onLevelFinished=function(){this.switchLevel(this.curLevel+1)},l.switchLevel=function(e){e<3?h.loadScene("level0"+(e+1)):h.loadScene("end")},i}(d)).prototype,"minY",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=i(w.prototype,"increment",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),C=i(w.prototype,"curLevel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=i(w.prototype,"gameOverCollider",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(w.prototype,"levelFinishedCollider",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(w.prototype,"target",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=w))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/ContactPointHelper.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var n,t,i,e,r,a,l,s,c,f,u,p,_,h;return{setters:[function(o){n=o.defineProperty,t=o.inheritsLoose,i=o.assertThisInitialized},function(o){e=o.cclegacy,r=o._decorator,a=o.Quat,l=o.loader,s=o.Prefab,c=o.Node,f=o.game,u=o.ColliderComponent,p=o.Vec3,_=o.instantiate,h=o.Component}],execute:function(){var d,C,g;e._RF.push({},"276fcld+b5O8qjGJZTPQFke","ContactPointHelper",void 0);var v=r.ccclass,y=(r.property,r.menu),P=new a;o("ContactPointHelper",v("COMMON.ContactPointHelper")(d=y("common/ContactPointHelper")((g=C=function(o){function e(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=o.call.apply(o,[this].concat(r))||this,n(i(t),"_entityMap",new Map),t}t(e,o);var r=e.prototype;return r.__preload=function(){null!=e._point||1&e._flag||(e._flag|=1,l.loadRes("common/prefabs/Point",s,(function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];n&&(n[0]?console.error(n[0]):e._point=n[1])}))),null!=e._arrow||2&e._flag||(e._flag|=2,l.loadRes("common/prefabs/Arrow",s,(function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];n&&(n[0]?console.error(n[0]):e._arrow=n[1])}))),null==e._container&&(e._container=new c("__CONTACT_POINT__"),f.addPersistRootNode(e._container))},r.onLoad=function(){e._insArr.push(this)},r.onEnable=function(){var o=this.getComponents(u),n=this;o.forEach((function(o){o.on("onCollisionEnter",n.onCollision,n),o.on("onCollisionStay",n.onCollision,n),o.on("onCollisionExit",n.onCollision,n)}))},r.onDisable=function(){var o=this.getComponents(u),n=this;o.forEach((function(o){o.off("onCollisionEnter",n.onCollision,n),o.off("onCollisionStay",n.onCollision,n),o.off("onCollisionExit",n.onCollision,n)}))},r.onCollision=function(o){if(e._point&&e._arrow){this._entityMap.has(o.otherCollider.uuid)||this._entityMap.set(o.otherCollider.uuid,{pt:[],aw:[]});var n=this._entityMap.get(o.otherCollider.uuid);n.pt.forEach((function(o){o.active=!1})),n.aw.forEach((function(o){o.active=!1})),o.contacts.forEach((function(o,t){var i,r,l=new p,s=new p;o.isBodyA?(o.getWorldPointOnA(l),o.getWorldNormalOnB(s)):(o.getWorldPointOnB(l),o.getWorldNormalOnA(s)),n.pt.length>t?(i=n.pt[t],r=n.aw[t],i.active=!0,r.active=!0):((i=_(e._point)).setWorldScale(.25,.25,.25),i.setParent(e._container),(r=_(e._arrow)).setParent(e._container),n.pt.push(i),n.aw.push(r)),i.setWorldPosition(l),r.setWorldPosition(l),a.rotationTo(P,p.UNIT_Z,s),r.setWorldRotation(P)}))}},r.onDestroy=function(){var o=e._insArr.indexOf(this);o>=0&&e._insArr.splice(o,1),this._entityMap.forEach((function(o){o.pt.forEach((function(o){o.removeFromParent(),o.destroy()})),o.aw.forEach((function(o){o.removeFromParent(),o.destroy()}))}))},e}(h),n(C,"_point",null),n(C,"_arrow",null),n(C,"_flag",0),n(C,"_insArr",[]),n(C,"_container",null),d=g))||d)||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/RigidCharacterController.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./RaycastCollect.ts","./RigidCharacter.ts"],(function(t){"use strict";var e,i,r,n,a,o,s,c,h,l,u,p,y,f,m,_,d,b,g,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.defineProperty,o=t.createClass},function(t){s=t.cclegacy,c=t._decorator,h=t.SystemEvent,l=t.Quat,u=t.Vec3,p=t.Node,y=t.Vec2,f=t.systemEvent,m=t.macro,_=t.director,d=t.clamp,b=t.Component},function(t){g=t.RaycastCollect},function(t){C=t.RigidCharacter}],execute:function(){var v,w,T,E,S,R,D,z,k,K,O,x,F,Y,U,A,J,X,M,V,I,N,Z,j,H,P;s._RF.push({},"2f54f4Nux1Jwb11ViTNgGqn","RigidCharacterController",void 0);var L,B=c.ccclass,G=c.property,q=c.menu,W=h.EventType;!function(t){t[t.CT_ROTATE=2]="CT_ROTATE",t[t.CT_JUMP=4]="CT_JUMP",t[t.CT_RUSH=16]="CT_RUSH"}(L||(L={}));var Q=new l,$=new u;t("RigidCharacterController",(v=B("Character.RigidCharacterController"),w=q("demo/character/RigidCharacterController"),T=G(C),E=G({type:p}),S=G({type:p}),v(R=w((z=e((D=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,r(n(e),"character",z,n(e)),r(n(e),"currentOrient",k,n(e)),r(n(e),"targetOrient",K,n(e)),r(n(e),"rotateFactor",O,n(e)),r(n(e),"rotateEnable",x,n(e)),r(n(e),"moveEnable",F,n(e)),r(n(e),"moveFrameInterval",Y,n(e)),r(n(e),"moveInAir",U,n(e)),r(n(e),"moveConstant",A,n(e)),r(n(e),"inverseXZ",J,n(e)),r(n(e),"negativeX",X,n(e)),r(n(e),"moveSpeed",M,n(e)),r(n(e),"maxMoveSpeed",V,n(e)),r(n(e),"flyThreshold",I,n(e)),r(n(e),"blockThreshold",N,n(e)),r(n(e),"sencondaryJumpImpulse",Z,n(e)),r(n(e),"gravity",j,n(e)),r(n(e),"jumpRate",H,n(e)),r(n(e),"maxVeticalVelocity",P,n(e)),a(n(e),"_constraint",0),a(n(e),"_jumping",!1),a(n(e),"_flying",0),a(n(e),"_stateX",0),a(n(e),"_stateZ",0),a(n(e),"_isShiftDown",!1),a(n(e),"_isAltDown",!1),a(n(e),"_isSpaceDown",!1),a(n(e),"_isCancelFlying",!1),a(n(e),"_startAccelerationTime",0),a(n(e),"_JumpRefreshTime",0),a(n(e),"_raycast",null),e}i(e,t);var s=e.prototype;return s.onLoad=function(){this._raycast=this.addComponent(g)},s.onEnable=function(){f.on(W.TOUCH_START,this.onTouchStart,this),f.on(W.TOUCH_END,this.onTouchEnd,this),f.off(W.TOUCH_CANCEL,this.onTouchEnd,this),f.on(W.KEY_DOWN,this.onKeyDown,this),f.on(W.KEY_UP,this.onKeyUp,this)},s.onDisable=function(){f.off(W.TOUCH_START,this.onTouchStart,this),f.off(W.TOUCH_END,this.onTouchEnd,this),f.off(W.TOUCH_CANCEL,this.onTouchEnd,this),f.off(W.KEY_DOWN,this.onKeyDown,this),f.off(W.KEY_UP,this.onKeyUp,this)},s.onTouchStart=function(t){this._isSpaceDown=!0},s.onTouchEnd=function(t){this._isSpaceDown=!1},s.onKeyDown=function(t){t.keyCode==m.KEY.w?this._stateZ=1:t.keyCode==m.KEY.s?this._stateZ=-1:t.keyCode==m.KEY.a?this._stateX=1:t.keyCode==m.KEY.d?this._stateX=-1:t.keyCode==m.KEY.space?this._isSpaceDown=!0:t.keyCode==m.KEY.shift?this._isShiftDown=!0:t.keyCode==m.KEY.alt&&(this._isAltDown=!0)},s.onKeyUp=function(t){t.keyCode==m.KEY.w||t.keyCode==m.KEY.s?this._stateZ=0:t.keyCode==m.KEY.d||t.keyCode==m.KEY.a?this._stateX=0:t.keyCode==m.KEY.space?(this._isSpaceDown=!1,this._isCancelFlying=!0):t.keyCode==m.KEY.shift?this._isShiftDown=!1:t.keyCode==m.KEY.alt&&(this._isAltDown=!1)},s.update=function(t){var e=1e3/60;this._raycast.updateFunction(),this.character.updateFunction(e),this.updateCharacter(e),this.character.velocity.y>this.maxVeticalVelocity&&(this.character.velocity.y=this.maxVeticalVelocity,this.character.rigidBody.setLinearVelocity(this.character.velocity)),this._isSpaceDown=!1},s.updateCharacter=function(t){if(this.character.onGround&&(this._JumpRefreshTime-=t,this._JumpRefreshTime<0&&(this._jumping&&(this._constraint=0),this._jumping=!1,this._JumpRefreshTime=0),this._flying=0,this.character.gravity=this.gravity.x,this.character.maxSpeed=this.maxMoveSpeed.x),this._isSpaceDown?this._constraint&L.CT_JUMP?0===this._flying&&this.canFly&&(this._flying=1,this._isCancelFlying=!1,this.character.gravity=this.gravity.y,this.character.maxSpeed=this.maxMoveSpeed.y,this.character.rigidBody.applyImpulse(this.sencondaryJumpImpulse)):(this.character.jump(0),this._jumping=!0,this._JumpRefreshTime=this.jumpRate,this._constraint|=L.CT_JUMP):1===this._flying&&(this._isCancelFlying||this.character.contacted)&&(this._flying=2,this.character.gravity=this.gravity.x,this.character.maxSpeed=this.maxMoveSpeed.x),this.rotateEnable&&!(this._constraint&L.CT_ROTATE||this._isAltDown)){var e=this.currentOrient.rotation,i=this.targetOrient.rotation;l.equals(e,i)||(l.slerp(Q,e,i,this.rotateFactor),this.currentOrient.worldRotation=Q)}if(this.moveEnable&&_.getTotalFrames()%this.moveFrameInterval==0){if(this.isBlock)return;if(!this.moveInAir&&!this.character.onGround&&1!==this._flying)return;if(this.moveConstant&&(this._stateX=this.negativeX?-1:1),this._stateX||this._stateZ)if(this.inverseXZ?$.set(this._stateZ,0,-this._stateX):$.set(this._stateX,0,this._stateZ),$.normalize(),$.negative(),this.rotateEnable){this.targetOrient.forward=$,$.set(this.currentOrient.forward),$.negative();var r=this.currentOrient.rotation,n=this.targetOrient.rotation,a=d(this.rotationScalar(r,n),0,1);this.character.move($,this.moveSpeed*a)}else this.character.move($,this.moveSpeed)}},s.rotationScalar=function(t,e){return Math.abs(t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w)},s.onClickJump=function(){this._isSpaceDown=!0},o(e,[{key:"isFlying",get:function(){return this._flying}},{key:"canFly",get:function(){return this.flyThreshold>this.character.velocity.y}},{key:"isBlock",get:function(){return Math.abs(this._raycast.hitNormal.z)>=this.blockThreshold}}]),e}(b)).prototype,"character",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(D.prototype,"currentOrient",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(D.prototype,"targetOrient",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(D.prototype,"rotateFactor",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=e(D.prototype,"rotateEnable",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(D.prototype,"moveEnable",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=e(D.prototype,"moveFrameInterval",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),U=e(D.prototype,"moveInAir",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=e(D.prototype,"moveConstant",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J=e(D.prototype,"inverseXZ",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),X=e(D.prototype,"negativeX",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),M=e(D.prototype,"moveSpeed",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),V=e(D.prototype,"maxMoveSpeed",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(5,10)}}),I=e(D.prototype,"flyThreshold",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),N=e(D.prototype,"blockThreshold",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.9}}),Z=e(D.prototype,"sencondaryJumpImpulse",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,10,0)}}),j=e(D.prototype,"gravity",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(-20,-10)}}),H=e(D.prototype,"jumpRate",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),P=e(D.prototype,"maxVeticalVelocity",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),R=D))||R)||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/sequence-animation.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,a,r,o,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,n=t.defineProperty},function(t){a=t.cclegacy,r=t._decorator,o=t.ccenum,s=t.Texture2D,u=t.MeshRenderer,c=t.Vec4}],execute:function(){var m,l,h,d,f,p,L,O,P,y,g,v;t({PlaybackMode:void 0,fillParams:function(t,e){var i=void 0!==t.duration?t.duration:1,n=void 0!==t.mode?t.mode:A.LOCAL_LOOP,a=void 0!==t.frames?t.frames:t.width*t.height,r=void 0!==t.startFrom?t.startFrom:0,o=void 0!==t.nextState?t.nextState:-1;e.params.x=t.width+.1*t.height,e.params.y=a,e.params.z=n,e.params.w=n===A.GLOBAL_LOOP?i:r,e.duration=n===A.GLOBAL_LOOP?0:i,e.nextState=o}}),a._RF.push({},"56e3ey+0tVDHp7aSS2A8RDM","sequence-animation",void 0);var A,S=r.ccclass,_=r.property;!function(t){t[t.LOCAL_LOOP=0]="LOCAL_LOOP",t[t.LOCAL_ONCE=1]="LOCAL_ONCE",t[t.GLOBAL_LOOP=2]="GLOBAL_LOOP"}(A||(A=t("PlaybackMode",{}))),o(A);var b=t("SequenceAnimationInfo",(m=S("SequenceAnimationInfo"),l=_(s),m((f=e((d=function(){i(this,"texture",f,this),n(this,"params",new c(4.1,4,A.LOCAL_LOOP,0)),n(this,"duration",1),n(this,"nextState",-1)}).prototype,"texture",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));t("SequenceAnimationState",(p=S("SequenceAnimationState"),L=_(u),O=_([b]),p((g=e((y=function(){function t(){i(this,"model",g,this),i(this,"animInfo",v,this),n(this,"state",0),n(this,"stagingParam",new c),n(this,"duration",1)}var e=t.prototype;return e.isPlaying=function(t,e){for(void 0===e&&(e=this.state);e!==t;)if((t=this.animInfo[t].nextState)<0)return!1;return!0},e.setState=function(t){if(!this.isPlaying(t)){var e=this.animInfo[t];this.model.material.setProperty("mainTexture",e.texture),c.copy(this.stagingParam,e.params),this.duration=e.duration,this.state=t}},e.tick=function(t){this.duration&&(this.stagingParam.w+=t/this.duration)},e.update=function(){this.model.material.setProperty("seqAnimParams",this.stagingParam)},t}()).prototype,"model",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(y.prototype,"animInfo",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=y))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/RigidCharacter.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,n,r,a,l,c,s,u,h,d,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,o=t.inheritsLoose,n=t.assertThisInitialized,r=t.defineProperty,a=t.createClass},function(t){l=t.cclegacy,c=t._decorator,s=t.Vec3,u=t.RigidBody,h=t.Collider,d=t.Component,p=t.PhysicsSystem}],execute:function(){var g,y,m,_,f,C,b,v,S,w,B,P,R,z,L,N,D,V;l._RF.push({},"596fbIiY9ZBDI5y66x8iDSP","RigidCharacter",void 0);var A=c.ccclass,j=c.property,x=c.requireComponent,M=c.menu,k=new s,F=function(){function t(){r(this,"point",new s),r(this,"normal",new s)}return t.prototype.assign=function(t,i){return t.isBodyA?(t.getWorldNormalOnB(this.normal),t.getWorldPointOnA(this.point)):(t.getWorldNormalOnA(this.normal),t.getWorldPointOnB(this.point)),this.collider=i,this},t}(),I=[],O=function(){function t(){}return t.getContacts=function(t,i,e){for(var o=0;o<t.length;o++)e.push(this.getContact(t[o],i))},t.getContact=function(t,i){return(I.length>0?I.pop():new F).assign(t,i)},t.recyContacts=function(t){var i;(i=Array.prototype.push).call.apply(i,[I].concat(t)),t.length=0},t}(),H=A("Character.JumpParam")((m=i((y=function(){e(this,"perpRatio",m,this),e(this,"steepPerpRatio",_,this),e(this,"height",f,this),e(this,"maxHeight",C,this)}).prototype,"perpRatio",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=i(y.prototype,"steepPerpRatio",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=i(y.prototype,"height",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=i(y.prototype,"maxHeight",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),g=y))||g;t("RigidCharacter",(b=A("Character.RigidCharacter"),v=M("demo/character/RigidCharacter"),S=x(u),w=j(H),b(B=v(B=S((R=i((P=function(t){function i(){for(var i,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return i=t.call.apply(t,[this].concat(a))||this,e(n(i),"maxSpeed",R,n(i)),e(n(i),"damping",z,n(i)),e(n(i),"slopeLimit",L,n(i)),e(n(i),"bullet",N,n(i)),e(n(i),"gravity",D,n(i)),e(n(i),"jumpParam",V,n(i)),r(n(i),"_rigidBody",null),r(n(i),"_collider",null),r(n(i),"_grounded",!0),r(n(i),"_toSteep",!1),r(n(i),"_contacted",!1),r(n(i),"_contacts",[]),r(n(i),"_groundContact",null),r(n(i),"_groundNormal",s.UP.clone()),r(n(i),"_contactNormal",new s),r(n(i),"_velocity",new s),r(n(i),"_jumpDir",new s),i}o(i,t);var l=i.prototype;return l.start=function(){this._rigidBody=this.getComponent(u),this._collider=this.getComponent(h),this._collider.on("onCollisionEnter",this.onCollision,this),this._collider.on("onCollisionStay",this.onCollision,this),this._collider.on("onCollisionExit",this.onCollision,this),this.bullet&&function(t,i,e){void 0===i&&(i=.001);void 0===e&&(e=.05);if(t)if(p.PHYSICS_AMMO){var o=window.Ammo,n=t.body.impl;n.useCCD=!0;var r=o.castObject(n,o.btCollisionObject);r.wrapped=t.body,r.useCCD=!0,n.setCcdMotionThreshold(i),n.setCcdSweptSphereRadius(e)}else p.PHYSICS_PHYSX&&t.body.useCCD(e>0)}(this._rigidBody)},l.move=function(t,i){this._rigidBody.getLinearVelocity(k);var e=k.y;s.scaleAndAdd(k,k,t,i),k.y=0;var o=this.maxSpeed;k.lengthSqr()>o&&(k.normalize(),k.multiplyScalar(o)),k.y=e,this._rigidBody.setLinearVelocity(k.multiply(this._rigidBody.linearFactor))},l.jump=function(t){var i=this.jumpParam,e=this._jumpDir;this.toSteep?s.lerp(e,s.UP,this._groundNormal,i.steepPerpRatio):s.lerp(e,s.UP,this._groundNormal,i.perpRatio);var o=this.calculateJumpVerticalSpeed(i.height+(i.maxHeight-i.height)*t);this._rigidBody.getLinearVelocity(k),s.scaleAndAdd(k,k,e,o),this._rigidBody.setLinearVelocity(k.multiply(this._rigidBody.linearFactor))},l.updateFunction=function(t){this.saveState(),this.updateContactInfo(),this.applyGravity(),this.applyDamping()},l.applyDamping=function(t){void 0===t&&(t=1/60),this.damping&&(this._rigidBody.getLinearVelocity(k),k.multiplyScalar(Math.pow(1-this.damping,t)),this._rigidBody.setLinearVelocity(k.multiply(this._rigidBody.linearFactor)))},l.applyGravity=function(){var t=this.gravity,i=this._rigidBody.mass;k.set(0,i*t,0),this._rigidBody.applyForce(k)},l.saveState=function(){this._rigidBody.getLinearVelocity(this._velocity)},l.getVelocity=function(t){this._rigidBody.getLinearVelocity(t)},l.updateContactInfo=function(){this._grounded=!1,this._contacted=!1,this._groundContact=null,this._contactNormal.set(s.ZERO);for(var t=this.node.worldPosition,i=-.001,e=0;e<this._contacts.length;e++){this._contacted=!0;var o=this._contacts[e],n=o.normal,r=o.point;this._contactNormal.add(n),n.y<=1e-4||n.y>i&&r.y<t.y-.25&&(this._grounded=!0,i=n.y,this._groundContact=o)}this._contactNormal.normalize(),this._grounded?(s.copy(this._groundNormal,this._groundContact.normal),this._toSteep=this._groundContact.normal.y<=Math.cos(this.slopeLimit*Math.PI/180)):(s.copy(this._groundNormal,s.UP),this._toSteep=!1),O.recyContacts(this._contacts)},l.calculateJumpVerticalSpeed=function(t){return Math.sqrt(2*t*Math.abs(this.gravity))},l.onCollision=function(t){O.getContacts(t.contacts,t.selfCollider,this._contacts)},a(i,[{key:"rigidBody",get:function(){return this._rigidBody}},{key:"onGround",get:function(){return this._grounded}},{key:"velocity",get:function(){return this._velocity}},{key:"toSteep",get:function(){return this._toSteep}},{key:"isFalling",get:function(){return this._velocity.y<-1e-7}},{key:"contacted",get:function(){return this._contacted}},{key:"contactNormal",get:function(){return this._contactNormal}}]),i}(d)).prototype,"maxSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),z=i(P.prototype,"damping",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),L=i(P.prototype,"slopeLimit",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),N=i(P.prototype,"bullet",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=i(P.prototype,"gravity",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-20}}),V=i(P.prototype,"jumpParam",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new H}}),B=P))||B)||B)||B));l._RF.pop()}}}));

System.register("chunks:///_virtual/AxisHelper.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var i,e,r,s,t,o,a,c,l;return{setters:[function(n){i=n.defineProperty,e=n.inheritsLoose,r=n.assertThisInitialized},function(n){s=n.cclegacy,t=n._decorator,o=n.loader,a=n.Prefab,c=n.instantiate,l=n.Component}],execute:function(){var u,_,h;s._RF.push({},"5bb94205NtNprcLIythUQv4","AxisHelper",void 0);var p=t.ccclass,f=(t.property,t.menu);n("AxisHelper",p("COMMON.AxisHelper")(u=f("common/AxisHelper")((h=_=function(n){function s(){for(var e,s=arguments.length,t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];return e=n.call.apply(n,[this].concat(t))||this,i(r(e),"_ins",null),e}e(s,n);var t=s.prototype;return t.__preload=function(){null==s._axis&&o.loadRes("common/prefabs/Axis",a,(function(){for(var n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];i&&(i[0]?console.error(i[0]):(s._axis=i[1],s._insArr.forEach((function(n){!n._ins&&n.enabled&&n.enabledInHierarchy&&n.node.active&&n.node.activeInHierarchy&&n.onEnable()}))))}))},t.onLoad=function(){s._insArr.push(this)},t.onEnable=function(){s._axis&&(null==this._ins&&(this._ins=c(s._axis),this.node.addChild(this._ins)),this._ins.active=!0)},t.onDisable=function(){this._ins&&(this._ins.active=!1)},t.onDestroy=function(){var n=s._insArr.indexOf(this);n>=0&&s._insArr.splice(n,1)},s}(l),i(_,"_axis",null),i(_,"_insArr",[]),u=h))||u)||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/ForceField.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var e,r,o,t,n,l,s,c,a,h,g;return{setters:[function(i){e=i.applyDecoratedDescriptor,r=i.inheritsLoose,o=i.initializerDefineProperty,t=i.assertThisInitialized,n=i.defineProperty},function(i){l=i.cclegacy,s=i._decorator,c=i.Vec3,a=i.BoxCollider,h=i.geometry,g=i.Component}],execute:function(){var d,u,p,f;l._RF.push({},"67424q1e5BCeaNMaxXDbIFS","ForceField",void 0);var b=s.ccclass,y=s.property,C=s.requireComponent,T=new c;i("ForceField",b("ForceField")(d=C(a)((p=e((u=function(i){function e(){for(var e,r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return e=i.call.apply(i,[this].concat(l))||this,o(t(e),"strength",p,t(e)),o(t(e),"direction",f,t(e)),n(t(e),"bounds",new h.AABB),n(t(e),"boxCollider",null),e}r(e,i);var l=e.prototype;return l.onLoad=function(){this.boxCollider=this.getComponent(a)},l.onEnable=function(){this.boxCollider.on("onTriggerEnter",this.onTrigger,this),this.boxCollider.on("onTriggerStay",this.onTrigger,this),this.boxCollider.on("onTriggerExit",this.onTrigger,this)},l.start=function(){this.node.children.length>0&&c.transformQuat(this.direction,c.UNIT_Z,this.node.children[0].worldRotation),this.bounds.copy(this.boxCollider.worldBounds)},l.onDisable=function(){this.boxCollider.off("onTriggerEnter",this.onTrigger,this),this.boxCollider.off("onTriggerStay",this.onTrigger,this),this.boxCollider.off("onTriggerExit",this.onTrigger,this)},l.onTrigger=function(i){var e=i.otherCollider.attachedRigidBody;e&&e.isDynamic&&e.applyForce(c.multiplyScalar(T,this.direction,this.strength))},e}(g)).prototype,"strength",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),f=e(u.prototype,"direction",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,0,1)}}),d=u))||d)||d);l._RF.pop()}}}));

System.register("chunks:///_virtual/RaycastCollect.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,s,a,n,o,c,l,u,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.defineProperty},function(t){n=t.cclegacy,o=t._decorator,c=t.geometry,l=t.physics,u=t.Vec3,p=t.PhysicsSystem,y=t.Component}],execute:function(){var h,f,m,b,d,C,D;n._RF.push({},"78e15ITbu9MBrB+64MzuXK/","RaycastCollect",void 0);var g=o.ccclass,w=o.property,R=new c.Ray;t("RaycastCollect",(h=g("RaycastCollect"),f=w({type:l.PhysicsGroup}),h((d=e((b=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(s(e),"castDirection",d,s(e)),r(s(e),"castGroup",C,s(e)),r(s(e),"maxCastDistance",D,s(e)),a(s(e),"hitNormal",new u(0,1,0)),e}return i(e,t),e.prototype.updateFunction=function(){if(R.d.set(this.castDirection),R.o.set(this.node.worldPosition),p.instance.raycastClosest(R,this.castGroup,this.maxCastDistance,!1)){var t=p.instance.raycastClosestResult;this.hitNormal.set(t.hitNormal)}else this.hitNormal.set(u.UNIT_Y)},e}(y)).prototype,"castDirection",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(0,0,-1)}}),C=e(b.prototype,"castGroup",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.PhysicsGroup.DEFAULT}}),D=e(b.prototype,"maxCastDistance",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.15}}),m=b))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/StairsGenerator.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,n,o,a,i,l,c,s,d,u,p,f,h,_;return{setters:[function(e){r=e.defineProperty,t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createClass},function(e){l=e.cclegacy,c=e._decorator,s=e.Prefab,d=e.PhysicsMaterial,u=e.loader,p=e.instantiate,f=e.Vec3,h=e.Collider,_=e.Component}],execute:function(){var g,y,b,v,m,w,z,C;l._RF.push({},"80ac5t9IotBIKCUyj3wfdGN","StairsGenerator",void 0);var P=c.ccclass,F=c.property;e("StairsGenerator",(g=P("StairsGenerator"),y=F(s),g((C=z=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r=e.call.apply(e,[this].concat(n))||this,o(a(r),"count",m,a(r)),o(a(r),"prefab",w,a(r)),r}n(r,e);var t=r.prototype;return t.__preload=function(){r._zeroFriction.friction=0;var e=r;null!==e._ladder||1&e._flag||(e._flag|=1,u.loadRes(e.url,s,(function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];t&&(t[0]?console.error(t[0]):(e._ladder=t[1],e._onloaded&&(e._onloaded.forEach((function(r){r(e._ladder)})),e._onloaded.length=0)))})))},t.start=function(){0==this.node.children.length&&(r._ladder?this.generator(r._ladder):r._onloaded.push(this.generator.bind(this)))},t.generator=function(e){for(var t=e.data.scale,n=0;n<this.count;n++){var o=p(e);this.node.addChild(o);var a=n+1;if(o.position=new f(0,t.y/2*(a+n),t.z/2*(a+n)),n==this.count-1)o.getComponent(h).material=r._zeroFriction}},i(r,[{key:"generate",get:function(){return this.node.destroyAllChildren(),0==this.node.children.length&&this.prefab,!1},set:function(e){}}]),r}(_),r(z,"url","common/prefabs/Ladder"),r(z,"_flag",0),r(z,"_ladder",null),r(z,"_onloaded",[]),r(z,"_zeroFriction",new d),m=t((v=C).prototype,"count",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),w=t(v.prototype,"prefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(v.prototype,"generate",[F],Object.getOwnPropertyDescriptor(v.prototype,"generate"),v.prototype),b=v))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/first-person-camera.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,s,r,a,c,h,d,y,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.defineProperty},function(e){r=e.cclegacy,a=e._decorator,c=e.math,h=e.macro,d=e.systemEvent,y=e.SystemEvent,l=e.Component}],execute:function(){var u,p,f,v,C,_,E,m,S;r._RF.push({},"83969PIqqtCzpmwWOBT+ujw","first-person-camera",void 0);var k=a.ccclass,w=a.property,T=a.menu,z=new c.Vec2,b=new c.Vec2,A=new c.Vec3,x=new c.Quat,V=new c.Vec3(0,0,1),g="W".charCodeAt(0),D="S".charCodeAt(0),M="A".charCodeAt(0),O="D".charCodeAt(0),K="Q".charCodeAt(0),P="E".charCodeAt(0),U="w".charCodeAt(0),W="s".charCodeAt(0),L="a".charCodeAt(0),H="d".charCodeAt(0),Q="q".charCodeAt(0),Y="e".charCodeAt(0),F=h.KEY.shift;e("FirstPersonCamera",(u=k("COMMON.FirstPersonCamera"),p=T("common/FirstPersonCamera"),f=w({slide:!0,range:[.05,.5,.01]}),u(v=p((_=t((C=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(n(t),"moveSpeed",_,n(t)),i(n(t),"moveSpeedShiftScale",E,n(t)),i(n(t),"damp",m,n(t)),i(n(t),"rotateSpeed",S,n(t)),s(n(t),"_euler",new c.Vec3),s(n(t),"_velocity",new c.Vec3),s(n(t),"_position",new c.Vec3),s(n(t),"_speedScale",1),t}o(t,e);var a=t.prototype;return a.onLoad=function(){c.Vec3.copy(this._euler,this.node.eulerAngles),c.Vec3.copy(this._position,this.node.position)},a.onDestroy=function(){this._removeEvents()},a.onEnable=function(){this._addEvents()},a.onDisable=function(){this._removeEvents()},a.update=function(e){c.Vec3.transformQuat(A,this._velocity,this.node.rotation),c.Vec3.scaleAndAdd(this._position,this._position,A,this.moveSpeed*this._speedScale),c.Vec3.lerp(A,this.node.position,this._position,e/this.damp),this.node.setPosition(A),c.Quat.fromEuler(x,this._euler.x,this._euler.y,this._euler.z),c.Quat.slerp(x,this.node.rotation,x,e/this.damp),this.node.setRotation(x)},a._addEvents=function(){d.on(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),d.on(y.EventType.KEY_DOWN,this.onKeyDown,this),d.on(y.EventType.KEY_UP,this.onKeyUp,this),d.on(y.EventType.TOUCH_MOVE,this.onTouchMove,this),d.on(y.EventType.TOUCH_END,this.onTouchEnd,this)},a._removeEvents=function(){d.off(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),d.off(y.EventType.KEY_DOWN,this.onKeyDown,this),d.off(y.EventType.KEY_UP,this.onKeyUp,this),d.off(y.EventType.TOUCH_MOVE,this.onTouchMove,this),d.off(y.EventType.TOUCH_END,this.onTouchEnd,this)},a.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed/24;c.Vec3.transformQuat(A,V,this.node.rotation),c.Vec3.scaleAndAdd(A,this.node.position,A,t),this.node.setPosition(A)},a.onKeyDown=function(e){var t=this._velocity;e.keyCode===F?this._speedScale=this.moveSpeedShiftScale:e.keyCode===g||e.keyCode===U?0===t.z&&(t.z=-1):e.keyCode===D||e.keyCode===W?0===t.z&&(t.z=1):e.keyCode===M||e.keyCode===L?0===t.x&&(t.x=-1):e.keyCode===O||e.keyCode===H?0===t.x&&(t.x=1):e.keyCode===K||e.keyCode===Q?0===t.y&&(t.y=-1):e.keyCode!==P&&e.keyCode!==Y||0===t.y&&(t.y=1)},a.onKeyUp=function(e){var t=this._velocity;e.keyCode===F?this._speedScale=1:e.keyCode===g||e.keyCode===U?t.z<0&&(t.z=0):e.keyCode===D||e.keyCode===W?t.z>0&&(t.z=0):e.keyCode===M||e.keyCode===L?t.x<0&&(t.x=0):e.keyCode===O||e.keyCode===H?t.x>0&&(t.x=0):e.keyCode===K||e.keyCode===Q?t.y<0&&(t.y=0):e.keyCode!==P&&e.keyCode!==Y||t.y>0&&(t.y=0)},a.onTouchMove=function(e){e.getStartLocation(z),z.x>.4*r.winSize.width?(e.getDelta(b),this._euler.y-=.5*b.x,this._euler.x+=.5*b.y):(e.getLocation(b),c.Vec2.subtract(b,b,z),this._velocity.x=.01*b.x,this._velocity.z=.01*-b.y)},a.onTouchEnd=function(e){e.getStartLocation(z),z.x<.4*r.winSize.width&&(this._velocity.x=0,this._velocity.z=0)},a.changeEnable=function(){this.enabled=!this.enabled},t}(l)).prototype,"moveSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),E=t(C.prototype,"moveSpeedShiftScale",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),m=t(C.prototype,"damp",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),S=t(C.prototype,"rotateSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=C))||v)||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-quad.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./unlit-quad.ts"],(function(t){"use strict";var u,n,o,e;return{setters:[function(t){u=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){e=t.UnlitQuadComponent}],execute:function(){var c;n._RF.push({},"865c7dzJ1FHObJqWDX+ZmNU","debug-quad",void 0);var r=o.ccclass;t("DebugQuad",r("DebugQuad")(c=function(t){function n(){return t.apply(this,arguments)||this}return u(n,t),n.prototype.onLoad=function(){t.prototype.onLoad.call(this)},n}(e))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/StablizationHack.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,r,o,n,a,s,l,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Vec3,l=t.Node,c=t.Component}],execute:function(){var u,f,p,h,b,z,y,d;n._RF.push({},"878cbliCipHkrFM7C6i1qK7","StablizationHack",void 0);var g=a.ccclass,m=a.property,w=new s;t("StablizationHack",(u=g("StablizationHack"),f=m(l),p=m(l),u((z=i((b=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,r(o(i),"target",z,o(i)),r(o(i),"map",y,o(i)),r(o(i),"offset",d,o(i)),i}return e(i,t),i.prototype.updateFunction=function(){var t=this.target.worldPosition;if(Math.abs(t.z)>this.offset){this.target.worldPosition=w.set(t.x,t.y,t.z>0?t.z-this.offset:t.z+this.offset);var i=this.map.worldPosition;this.map.worldPosition=w.set(i.x,i.y,t.z>0?i.z-this.offset:i.z+this.offset)}},i}(c)).prototype,"target",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(b.prototype,"map",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(b.prototype,"offset",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),h=b))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/unlit-quad.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,o,n,s,a,p,u,c,l,h,d,y,f,g,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose,s=e.createClass},function(e){a=e.cclegacy,p=e._decorator,u=e.gfx,c=e.Vec3,l=e.ccenum,h=e.SpriteFrame,d=e.Texture2D,y=e.CCBoolean,f=e.Material,g=e.utils,_=e.builtinResMgr,b=e.MeshRenderer}],execute:function(){var v,m,w,x,O,S,z,M,D,P,C,N,R,A,T,F;e("ResizeAxis",void 0),a._RF.push({},"93929O83pBANKoOxC3c/52n","unlit-quad",void 0);var k,j=p.ccclass,B=p.property,X=null,E=null,L=null,U=null,Y={effectName:"unlit",technique:0,defines:{USE_TEXTURE:!0},states:{rasterizerState:{cullMode:u.CullMode.NONE}}},H=[0,1,1,1,0,0,1,0],I={positions:[-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0],uvs:H,indices:[0,1,2,2,1,3],minPos:new c(-.5,-.5,0),maxPos:new c(.5,.5,0)},q={depthStencilState:{depthWrite:!1},blendState:{targets:[{blend:!0,blendSrc:u.BlendFactor.SRC_ALPHA,blendDst:u.BlendFactor.ONE_MINUS_SRC_ALPHA,blendDstAlpha:u.BlendFactor.ONE_MINUS_SRC_ALPHA}]}},V={depthStencilState:{depthWrite:!0},blendState:{targets:[{blend:!1}]}};!function(e){e[e.NONE=0]="NONE",e[e.X=1]="X",e[e.Y=2]="Y"}(k||(k=e("ResizeAxis",{}))),l(k);e("UnlitQuadComponent",(v=j("UnlitQuadComponent"),m=B(h),w=B(d),x=B({type:d}),O=B({type:h}),S=B({type:y}),z=B({type:y}),M=B({override:!0,visible:!1}),D=B({override:!0,visible:!1}),P=B({override:!0,visible:!1}),C=B({override:!0,visible:!1}),v((A=t((R=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(o(t),"_sprite",A,o(t)),i(o(t),"_texture",T,o(t)),i(o(t),"_transparent",F,o(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){U||((U=new f).initialize(Y),X=g.createMesh(I),E=X.struct.vertexBundles[0].view,L=X.data.buffer.slice(E.offset,E.offset+E.length)),this.material=U,this._mesh=X,e.prototype.onLoad.call(this),this.updateTexture(),this.transparent=this._transparent},a.updateTexture=function(){var e=this.material&&this.material.passes[0],t=e&&e.getBinding("mainTexture");if("number"==typeof t){var r=this._sprite?this._sprite:this._texture?this._texture:_.get("grey-texture");e.bindTexture(t,r.getGFXTexture());var i=this.model&&this.model.subModels[0],o=i&&i.inputAssembler;if(o){var s=H;this._sprite&&(this._sprite._calculateUV(),s=this._sprite.uv);for(var a,p=0,c=u.Format.UNKNOWN,l=n(o.attributes);!(a=l()).done;){var h=a.value;if(h.name===u.AttributeName.ATTR_TEX_COORD){c=h.format;break}p+=u.FormatInfos[h.format].size}var d=o.vertexBuffers[0];g.writeBuffer(new DataView(L),s,c,p,d.stride),d.update(L)}}},a.updateSizeRatio=function(e){var t=this._sprite?this._sprite:this._texture?this._texture:null,r=t?t.width/t.height:1,i=this.node.scale;switch(e){case k.X:this.node.setScale(i.y*r,i.y,i.z);break;case k.Y:this.node.setScale(i.x,i.x/r,i.z)}},s(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this.updateTexture()}},{key:"spriteFrame",get:function(){return this._sprite},set:function(e){this._sprite=e,this.updateTexture()}},{key:"resizeX",get:function(){return!1},set:function(e){this.updateSizeRatio(k.X)}},{key:"resizeY",get:function(){return!1},set:function(e){this.updateSizeRatio(k.Y)}},{key:"transparent",get:function(){return this._transparent},set:function(e){this._transparent=e,this.material.overridePipelineStates(e?q:V)}},{key:"sharedMaterials",get:function(){return e.prototype.sharedMaterials},set:function(e){this.sharedMaterials=e}},{key:"mesh",get:function(){return e.prototype.mesh},set:function(e){this.mesh=e}},{key:"shadowCastingMode",get:function(){return e.prototype.shadowCastingMode},set:function(e){this.shadowCastingMode=e}},{key:"receiveShadow",get:function(){return e.prototype.receiveShadow},set:function(e){this.receiveShadow=e}}]),t}(b)).prototype,"_sprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(R.prototype,"_texture",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(R.prototype,"texture",[x],Object.getOwnPropertyDescriptor(R.prototype,"texture"),R.prototype),t(R.prototype,"spriteFrame",[O],Object.getOwnPropertyDescriptor(R.prototype,"spriteFrame"),R.prototype),t(R.prototype,"resizeX",[S],Object.getOwnPropertyDescriptor(R.prototype,"resizeX"),R.prototype),t(R.prototype,"resizeY",[z],Object.getOwnPropertyDescriptor(R.prototype,"resizeY"),R.prototype),F=t(R.prototype,"_transparent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(R.prototype,"transparent",[B],Object.getOwnPropertyDescriptor(R.prototype,"transparent"),R.prototype),t(R.prototype,"sharedMaterials",[M],Object.getOwnPropertyDescriptor(R.prototype,"sharedMaterials"),R.prototype),t(R.prototype,"mesh",[D],Object.getOwnPropertyDescriptor(R.prototype,"mesh"),R.prototype),t(R.prototype,"shadowCastingMode",[P],Object.getOwnPropertyDescriptor(R.prototype,"shadowCastingMode"),R.prototype),t(R.prototype,"receiveShadow",[C],Object.getOwnPropertyDescriptor(R.prototype,"receiveShadow"),R.prototype),N=R))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/end.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,n,i,c,o,a,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){c=t.cclegacy,o=t._decorator,a=t.Node,s=t.director,l=t.Component}],execute:function(){var u,p,d,f,h;c._RF.push({},"96dc7MbE0BMELvFj1LNtH6j","end",void 0);var g=o.ccclass,v=o.property;t("End",(u=g("End"),p=v(a),u((h=e((f=function(t){function e(){for(var e,r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c))||this,n(i(e),"target",h,i(e)),e}return r(e,t),e.prototype.start=function(){this.target.active=!1,this.target.active=!0,this.scheduleOnce((function(){s.loadScene("start")}),14)},e}(l)).prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=f))||d));c._RF.pop()}}}));

System.register("chunks:///_virtual/scene-change.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,a,c,i,o,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){c=e.cclegacy,i=e._decorator,o=e.Node,s=e.director,l=e.Component}],execute:function(){var u,p,h,f,g;c._RF.push({},"9955aVof49BN43v2tuwV0eP","scene-change",void 0);var v=i.ccclass,d=i.property;e("SceneChange",(u=v("SceneChange"),p=d(o),u((g=t((f=function(e){function t(){for(var t,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return t=e.call.apply(e,[this].concat(c))||this,r(a(t),"target",g,a(t)),t}n(t,e);var c=t.prototype;return c.start=function(){this.target&&(this.target.active=!1)},c.startGame=function(){this.target.active=!0,this.scheduleOnce((function(){s.loadScene("level01")}),9)},c.backToMeun=function(){s.loadScene("start")},t}(l)).prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));c._RF.pop()}}}));

System.register("chunks:///_virtual/RigidCharacterAnimation.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./RigidCharacter.ts","./RigidCharacterController.ts","./sequence-animation.ts","./animation-data.ts"],(function(t){"use strict";var e,a,r,i,n,c,o,s,l,h,u,p,S,A,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,n=t.defineProperty},function(t){c=t.cclegacy,o=t._decorator,s=t.Vec3,l=t.Component},function(t){h=t.RigidCharacter},function(t){u=t.RigidCharacterController},function(t){p=t.SequenceAnimationState},function(t){S=t.fillCharacterParams,A=t.fillPlaneParams,f=t.CharacterStates,d=t.PlaneStates}],execute:function(){var g,m,M,y,I,C,b,D,v,G,N,R;c._RF.push({},"da08fpgnp9LvIlbyogdpVbD","RigidCharacterAnimation",void 0);var P=o.ccclass,L=o.property,w=o.menu,z=new s;t("RigidCharacterAnimation",(g=P("Character.RigidCharacterAnimation"),m=w("demo/character/RigidCharacterAnimation"),M=L(h),y=L(u),I=L(p),C=L(p),g(b=m((v=e((D=function(t){function e(){for(var e,a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c))||this,r(i(e),"character",v,i(e)),r(i(e),"characterController",G,i(e)),r(i(e),"characterASM",N,i(e)),r(i(e),"planeASM",R,i(e)),n(i(e),"velAcc",0),e}a(e,t);var c=e.prototype;return c.onLoad=function(){S(this.characterASM.animInfo),A(this.planeASM.animInfo)},c.update=function(t){this.character.getVelocity(z),this.setFrontDirection(this.characterASM.model.node,z.z),this.setFrontDirection(this.planeASM.model.node,z.z),this.velAcc=.5*this.velAcc+.5*Math.abs(z.y),this.characterASM.tick(t),this.planeASM.tick(t);var e=this.characterASM.animInfo[this.characterASM.state];e.nextState>=0&&this.characterASM.stagingParam.w>1?this.setState(e.nextState):this.character.onGround||this.velAcc<.001?this.setState(f.RUNNING):1===this.characterController.isFlying?this.setState(f.GLIDING):this.setState(f.JUMPING),this.characterASM.update(),this.planeASM.update()},c.setFrontDirection=function(t,e){var a=t.scale;t.setScale(Math.abs(a.x)*(e>.5?1:-1),a.y,a.z)},c.setState=function(t){var e=d.HIDDEN;this.characterASM.isPlaying(f.GLIDING,t)?e=d.GLIDING_START:(this.characterASM.isPlaying(f.GLIDING)||this.planeASM.isPlaying(d.GLIDING_END))&&(e=d.GLIDING_END),this.planeASM.setState(e),this.characterASM.setState(t)},e}(l)).prototype,"character",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(D.prototype,"characterController",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(D.prototype,"characterASM",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),R=e(D.prototype,"planeASM",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),b=D))||b)||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/animation-data.ts",["cc","./sequence-animation.ts"],(function(t){"use strict";var e,a,L,I;return{setters:[function(t){e=t.cclegacy,a=t.ccenum},function(t){L=t.PlaybackMode,I=t.fillParams}],execute:function(){var i,N;t({CharacterStates:void 0,PlaneStates:void 0,fillCharacterParams:function(t){for(var e=0;e<t.length;++e)I(r[e],t[e])},fillPlaneParams:function(t){for(var e=0;e<t.length;++e)I(O[e],t[e])}}),e._RF.push({},"ed505xHT6ZPtLSvoiC67epu","animation-data",void 0);var G;!function(t){t[t.RUNNING=0]="RUNNING",t[t.JUMPING=1]="JUMPING",t[t.SLIDING=2]="SLIDING",t[t.SLIDING_LOOP=3]="SLIDING_LOOP",t[t.GLIDING=4]="GLIDING",t[t.GLIDING_LOOP=5]="GLIDING_LOOP"}(G||(G=t("CharacterStates",{}))),a(G);var n,r=((i={})[G.RUNNING]={width:4,height:3,frames:11,mode:L.GLOBAL_LOOP,duration:1},i[G.JUMPING]={width:4,height:2,mode:L.LOCAL_ONCE},i[G.SLIDING]={width:5,height:1,mode:L.LOCAL_ONCE,nextState:G.SLIDING_LOOP},i[G.SLIDING_LOOP]={width:2,height:1,mode:L.LOCAL_LOOP},i[G.GLIDING]={width:2,height:2,mode:L.LOCAL_ONCE,duration:.5,nextState:G.GLIDING_LOOP},i[G.GLIDING_LOOP]={width:5,height:4,frames:19,mode:L.LOCAL_LOOP,duration:2},i);!function(t){t[t.HIDDEN=0]="HIDDEN",t[t.GLIDING_START=1]="GLIDING_START",t[t.GLIDING_END=2]="GLIDING_END"}(n||(n=t("PlaneStates",{}))),a(n);var O=((N={})[n.HIDDEN]={width:3,height:6,mode:L.LOCAL_ONCE,startFrom:1,duration:0},N[n.GLIDING_START]={width:3,height:6,mode:L.LOCAL_ONCE,startFrom:1,duration:-.5},N[n.GLIDING_END]={width:3,height:6,mode:L.LOCAL_ONCE,duration:.5},N);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CameraClamping.ts","./ContactPointHelper.ts","./RaycastCollect.ts","./RigidCharacter.ts","./RigidCharacterController.ts","./sequence-animation.ts","./AxisHelper.ts","./ForceField.ts","./StairsGenerator.ts","./first-person-camera.ts","./unlit-quad.ts","./debug-quad.ts","./StablizationHack.ts","./end.ts","./scene-change.ts","./animation-data.ts","./RigidCharacterAnimation.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});